{{ define "main" }}
<div class="wrapper post">
    <main class="page-content" aria-label="Content">
        <article>
            <header class="header">
                <h1 class="header-title">{{ .Title }}</h1>
            </header>

            <div class="page-content">
                {{ .Content }}

                {{ $repos := .Site.Data.repos }}
                {{ if $repos }}

                <div class="projects-filters"></div>

                <div class="projects-grid">
                    {{ range $repos }}
                    {{ if not .is_archived }}
                    <div class="project-card" data-language="{{ .language }}">
                        <h3 class="project-name">
                            <a href="{{ .url }}" target="_blank" rel="noopener noreferrer">{{ .name }}</a>
                            {{ if .is_private }}<span class="badge-private">üîí</span>{{ end }}
                        </h3>

                        <p class="project-description">{{ .description }}</p>

                        <div class="project-meta">
                            {{ if .language }}
                            <span class="language-badge" data-lang="{{ .language }}">
                                {{ .language }}
                            </span>
                            {{ end }}

                            {{ if gt .stars 0 }}
                            <span class="meta-item">‚≠ê {{ .stars }}</span>
                            {{ end }}

                            {{ if gt .forks 0 }}
                            <span class="meta-item">üç¥ {{ .forks }}</span>
                            {{ end }}
                        </div>

                        {{ if .topics }}
                        <div class="project-topics">
                            {{ range first 5 .topics }}
                            <span class="topic-tag">#{{ . }}</span>
                            {{ end }}
                        </div>
                        {{ end }}

                        {{ if .homepage }}
                        <div class="project-links">
                            <a href="{{ .homepage }}" target="_blank" rel="noopener noreferrer">üîó homepage</a>
                        </div>
                        {{ end }}

                        <div class="project-footer">
                            <small>updated: {{ dateFormat "Jan 2, 2006" .updated_at }}</small>
                        </div>
                    </div>
                    {{ end }}
                    {{ end }}
                </div>

                {{ else }}
                <p><em>No repository data found. Run <code>npm run fetch-repos</code> to fetch repositories.</em></p>
                {{ end }}
            </div>
        </article>
    </main>
</div>
{{ end }}